# Spring AOP支持的Aspect 注解分析

# Aop基本概念
### 连接点（Joinpoint）：
    表示需要在程序中插入横切关注点的扩展点，连接点可能是类初始化、方法执行、方法调用、字段调用或处理异常等等，Spring只支持方法执行连接点，在AOP中表示为“在哪里做”；
### 切入点（Pointcut）： 
    选择一组相关连接点的模式，即可以认为连接点的集合，Spring支持perl5正则表达式和AspectJ切入点模式，Spring默认使用AspectJ语法，在AOP中表示为“在哪里做的集合”；
### 增强（Advice）：或称为增强
    在连接点上执行的行为，增强提供了在AOP中需要在切入点所选择的连接点处进行扩展现有行为的手段；包括前置增强（before advice）、后置增强 (after advice)、环绕增强 （around advice），在Spring中通过代理模式实现AOP，并通过拦截器模式以环绕连接点的拦截器链织入增强 ；在AOP中表示为“做什么”；
### 方面/切面（Aspect）：
    横切关注点的模块化，比如上边提到的日志组件。可以认为是增强、引入和切入点的组合；在Spring中可以使用Schema和@AspectJ方式进行组织实现；在AOP中表示为“在哪里做和做什么集合”；
### 目标对象（Target Object）：
    需要被织入横切关注点的对象，即该对象是切入点选择的对象，需要被增强的对象，从而也可称为“被增强对象”；由于Spring AOP 通过代理模式实现，从而这个对象永远是被代理对象，在AOP中表示为“对谁做”；
### AOP代理（AOP Proxy）：
    AOP框架使用代理模式创建的对象，从而实现在连接点处插入增强（即应用切面），就是通过代理来对目标对象应用切面。在Spring中，AOP代理可以用JDK动态代理或CGLIB代理实现，而通过拦截器模型应用切面。
### 织入（Weaving）：
    织入是一个过程，是将切面应用到目标对象从而创建出AOP代理对象的过程，织入可以在编译期、类装载期、运行期进行。
### 引入（inter-type declaration）：
    也称为内部类型声明，为已有的类添加额外新的字段或方法，Spring允许引入新的接口（必须对应一个实现）到所有被代理对象（目标对象）, 在AOP中表示为“做什么（新增什么）” 连接点（Joinpoint）：
    
------

> * execution：用于匹配方法执行的连接点
> * within：用于匹配指定类型内的方法执行
> * this：用于匹配当前AOP代理对象类型的执行方法；注意是AOP代理对象的类型匹配，这样就可能包括引入接口也类型匹配
> * target：用于匹配当前目标对象类型的执行方法；注意是 目标对象的类型匹配，这样就不包括引入接口也类型匹配
> * args：用于匹配当前执行的方法传入的参数为指定类型的执行方法；
> * bean：Spring AOP扩展的，AspectJ没有对于指示 符，用于匹配特定名称的Bean对象的执行方法；
> * reference 、pointcut：表示引用其他命名切入点，只有@ApectJ风格支持，Schema风格不支持

------
> * @within：用于匹配所以持有指定注解类型内的方法
> * @target：用于匹配当前目标对象类型的执行方法，其中目标对象持有指定的注解
> * @args：用于匹配当前执行的方法传入的参数持有指定注解的执行
> * @annotation：用于匹配当前执行方法持有指定注解的方法

------
## 通配符说明
> * [*]：匹配任何数量字符
> * [..]：匹配任何数量字符的重复，比如在**类型模式**中匹配任何数量子包；而在**方法参数模式**中匹配任何数量参数
> * [+]：匹配指定类型的子类型，只能作为后缀放在**类型模式**后面

------
## 举例
1. java.lang.String    匹配String类型
2. java.*.String   匹配java包下任何**一级子包**下的String类型
3. java..*  匹配java包以及报下任何子包的类型
4. java.lang.*util   匹配java.lagn包下已util结尾的任何类型
5. java.lang.Number+   匹配java.lang包下任何Number的自类型 如：java.lang.Integer等

------
## 组合切入点表达式
AspectJ使用 且（&&）、或（||）、非（！）来组合切入点表达式
Xml中使用 and、or、not来代替&&、||、！

